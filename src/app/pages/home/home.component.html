<div style="display: flex; width: 100%; height: 100%">
  <div class="page-container">
    <!-- Render a list of cards with different aspect ratios -->
    <!--    <div class="video-actions-wrapper">-->
    @if (!(isGettingLatestVideos$ | async)) {
      <div class="video-cards" #cardsContainer>
        @for (card of cards; track $index) {
          @if (card.aspectRatio) {
            <div class="card-wrapper subItem">


              <div
                #pageContainer
                style="flex: 1; height: 100% ; display: flex; justify-content: center; flex-direction: row; align-items: center; padding: 0 16px"
              >
                <div style="display: flex; flex-direction: row; gap: 8px; width: fit-content; height: fit-content">
                  <div class="card" [ngStyle]="getCardBoxStyle(card)">
                    <div class="card-media">
                      @if ($index === currentVideoIndex) {
                        <app-video
                          aspectRatio="{{card.aspectRatio}}"
                          videoSrc="{{convertToSupabaseUrl(`${card.id}/master.m3u8`,'video')}}"></app-video>
                      } @else {
                        <img
                          [src]="convertToSupabaseUrl(card.thumbnailPath, 'thumbnail')"
                          [alt]="card.title || 'Video thumbnail'"
                          style="width:100%;height:100%;object-fit:cover;"/>
                      }
                    </div>
                  </div>
                  <div class="btn-wrapper">
                    <button mat-fab aria-label="Example icon button with a delete icon" class="heart"
                            [class.active]="isFavoriteActive"
                            (click)="isFavoriteActive = !isFavoriteActive">
                      @if (isFavoriteActive) {
                        <mat-icon>favorite</mat-icon>
                      } @else {
                        <mat-icon>favorite_border</mat-icon>
                      }
                    </button>

                    <button (click)="toggleComments()" mat-fab aria-label="Example icon button with a delete icon">
                      <mat-icon
                        fontSet="material-symbols-outlined"
                      >comment
                      </mat-icon>
                    </button>

                    <button mat-fab aria-label="Example icon button with a delete icon" class="bookmark"
                            [class.active]="isSavetagActive"
                            (click)="isSavetagActive = !isSavetagActive">
                      @if (isSavetagActive) {
                        <mat-icon>bookmark</mat-icon>
                      } @else {
                        <mat-icon>bookmark_border</mat-icon>
                      }
                    </button>
                    <button mat-fab aria-label="Example icon button with a delete icon" class="avatar-frame">
                      <img
                        src="https://image.dienthoaivui.com.vn/x,webp,q90/https://dashboard.dienthoaivui.com.vn/uploads/dashboard/editor_upload/avatar-ca-sau-cute-2.jpg"
                        alt="">
                    </button>


                  </div>
                </div>


              </div>


            </div>
          }

        }
      </div>

    }
    <!--    </div>-->
  </div>

  @if (showCommentExpanded) {
    <div class="comment-sidebar">
      <div class="comment-header">
        <mat-icon>chat_bubble_outline</mat-icon>
        <span>Comments</span>
        <button mat-icon-button (click)="toggleComments()">
          <mat-icon>close</mat-icon>
        </button>
      </div>

      <div class="comment-list">
        @for (c of comments; track c.id) {
          <div class="comment">
            <div class="avatar">
              <img [src]="c.avatar" alt="avatar"/>
            </div>
            <div class="comment-content">
              <p><strong>{{ c.name }}</strong> {{ c.text }}</p>
              <span class="date">{{ c.date }}</span>
            </div>
          </div>
        }
      </div>

      <div class="frame-comment">
        <mat-form-field appearance="outline">
          <mat-label>Thêm bình luận</mat-label>
          <input matInput placeholder="Viết gì đó..."/>
          <button mat-icon-button matSuffix>
            <mat-icon>send</mat-icon>
          </button>
        </mat-form-field>
      </div>
    </div>
  }


</div>
