//$color-primary: #95c01f !default;
//$color-secondary: #2315FF !default;
$border-radius: 0 !default;

@keyframes rotate {
  to {
    transform: rotate(360deg);
  }
}

::ng-deep.video-js.vjs-lime {
  border-radius: $border-radius;
  background-color: var(--mat-sys-surface);

  .vjs-big-play-button {
    width: 2em;
    height: 2em;
    line-height: 1.9em;
    border-radius: 1em;
    left: calc(50% + .5em);
    top: calc(50%);
    backdrop-filter: blur(4px);
    background-color: rgba(0, 0, 0, .6);
    border: 2px solid var(--mat-sys-primary);
    color: var(--mat-sys-primary);
  }

  &:hover,
  &:focus {
    .vjs-big-play-button {
      backdrop-filter: blur(4px);
      background-color: rgba(40, 40, 40, .6);
      border: 2px solid var(--mat-sys-primary);
      color: var(--mat-sys-primary);
    }
  }

  .vjs-loading-spinner {
    border: 3px solid rgba(0, 0, 0, 0.6);
    width: 45px;
    height: 45px;

    &:before,
    &:after {
      margin: -3px;
      animation: rotate .8s linear infinite;
      border-top-color: var(--mat-sys-primary);
    }

    &:after {
      display: none;
      border-top-color: var(--mat-sys-secondary);
    }
  }

  button:focus,
  .vjs-menu-item:focus {
    outline: none;
    color: var(--mat-sys-primary);
  }

  .vjs-control-bar {
    height: 5em;
    padding-top: 2em;
    background: linear-gradient(0deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.4) 35%, rgba(0, 0, 0, 0) 100%);
    border-bottom-left-radius: $border-radius;
    border-bottom-right-radius: $border-radius;
  }

  .vjs-control-bar > *:not(.vjs-volume-panel) {
    display: none !important;
  }

  button.vjs-icon-cog {
    font-size: 1.3em;
  }

  .vjs-menu-button-popup .vjs-menu .vjs-menu-content {
    background-color: rgba(0, 0, 0, .6);
    border-radius: 0.5em;
    backdrop-filter: blur(4px);
  }

  video {
    border-radius: $border-radius;

    &:focus {
      outline: none;
    }
  }

  .vjs-slider {
    background-color: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
  }

  .vjs-progress-holder {
    .vjs-load-progress {
      background-color: var(--mat-sys-primary);
      transition: width .15s linear;
    }

    .vjs-play-progress,
    .vjs-load-progress,
    .vjs-load-progress > div {
      border-radius: 10px;
    }
  }

  .vjs-menu li.vjs-menu-item:focus,
  .vjs-menu li.vjs-menu-item:hover,
  .js-focus-visible .vjs-menu li.vjs-menu-item:hover {
    &:not(.vjs-selected) {
      background-color: rgba(255, 255, 255, 0.3);
    }
  }

  //.vjs-fullscreen-control{
  //  position: absolute !important;
  //  right: 0;
  //  z-index: 1001;
  //}
}

.centered {
  scroll-snap-align: start none;
  scroll-snap-stop: always;
}

.video-title.collapsed {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;

}

.video-title {
  font-size: clamp(0.8rem, 1.5vw, 0.95rem);
  color: white;
  line-height: 1.4;
  overflow: hidden;
  transition: all 0.3s ease;
}

.toggle-btn {
  color: white;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 0.85rem;
  margin-top: 4px;
  padding: 0;
}

.expanded {
  background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 0%, /* trên trong suốt */
      rgba(0, 0, 0, 0.6) 50%, /* giữa tối */
      rgba(0, 0, 0, 0.1) 100% /* dưới trong suốt */
  );
}


// custom bar
::ng-deep .vjs-top-left-dock .vjs-play-control {
  width: 50px; /* tăng size nút */
  height: 50px;
  border-radius: 50%; /* hình tròn */
  background: rgba(0, 0, 0, 0.6); /* nền mờ */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  cursor: pointer;
}

/* icon play bên trong */
::ng-deep.vjs-top-left-dock .vjs-play-control .vjs-icon-placeholder:before {
  font-size: 2em; /* icon to hơn */
  line-height: 1;
  color: #fff; /* màu trắng */
  position: relative;
}

/* Nếu muốn hiệu ứng hover giống YouTube */
::ng-deep.vjs-top-left-dock .vjs-play-control:hover {
  background: rgba(0, 0, 0, 0.8);
}


/* Khi hover panel bung ra để chỉnh âm lượng */
::ng-deep.vjs-top-left-dock .vjs-volume-panel:hover {
  width: 100%; /* đủ rộng để thấy thanh trượt */
  border-radius: 25px; /* bo tròn hơn khi kéo dài */
}

/* Style cho nút mute (icon loa) */
::ng-deep.vjs-top-left-dock .vjs-mute-control {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  //background: transparent; /* kế thừa nền từ panel */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  cursor: pointer;
  background: rgba(0, 0, 0, 0.6); /* nền mờ */
  //transition: width .35s ease, border-radius .35s ease, background .35s ease;
}

/* Icon loa bên trong */
::ng-deep.vjs-top-left-dock .vjs-mute-control .vjs-icon-placeholder:before {
  font-size: 2em; /* icon to hơn */
  color: #fff; /* trắng */
  line-height: 1;
  position: relative;
}

/* Hover icon loa */
::ng-deep.vjs-top-left-dock .vjs-volume-panel:hover .vjs-mute-control {
  //background: rgba(0, 0, 0, 0.8);
  border-radius: 50% 0 0 50%;
  //transition: width .35s ease, border-radius .35s ease, background .35s ease;
}

::ng-deep.vjs-top-left-dock .vjs-volume-panel {
  align-items: center;
}


::ng-deep.vjs-top-left-dock .vjs-volume-panel {
  width: fit-content;
  /* background: rgba(0, 0, 0, 0.6); */
  height: 50px;
  outline: none;
}

//::ng-deep.vjs-volume-panel:hover .vjs-volume-control {
//  width: 100px !important;
//  padding-right: 10px !important;
//  background: rgba(0, 0, 0, 0.6) !important;
//  height: 100% !important;
//  border-radius: 0 37% 30% 0;
//}

::ng-deep .vjs-volume-bar {
  width: 90% !important;
  height: 0.3em;
}


::ng-deep .video-js .vjs-volume-bar {
  margin: auto auto auto 0
}

::ng-deep .video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal {
  transition: width .35s ease,
}


/* Trạng thái mặc định (thu gọn) + transition mượt */
:host ::ng-deep .vjs-top-left-dock .vjs-volume-control {
  width: 0 !important;
  padding-right: 0 !important;
  background: transparent !important;
  height: 100% !important;
  border-radius: 0;
  overflow: visible;

  /* hiệu ứng */
  transform-origin: left center;
  transform: scaleX(0);
  opacity: 0;
  transition: width .35s ease,
  padding-right .35s ease,
  background .25s ease,
  border-radius .35s ease,
  transform .35s ease,
  opacity .25s ease;
}

/* Khi .vjs-volume-panel được FOCUS (hoặc con bên trong được focus) */
:host ::ng-deep .vjs-top-left-dock .vjs-volume-panel:focus .vjs-volume-control,
:host ::ng-deep .vjs-top-left-dock .vjs-volume-panel:focus-within .vjs-volume-control {
  width: 100px !important;
  padding-right: 10px !important;
  background: rgba(0, 0, 0, 0.6) !important;
  height: 100% !important;
  border-radius: 0 25px 25px 0;

  transform: scaleX(1);
  opacity: 1;
}

/* (Tùy chọn) khi panel focus, đổi nền + bo góc cho nút loa cho đồng bộ */
:host ::ng-deep .vjs-top-left-dock .vjs-volume-panel:focus .vjs-mute-control,
:host ::ng-deep .vjs-top-left-dock .vjs-volume-panel:focus-within .vjs-mute-control {
  //background: rgba(0, 0, 0, 0.8);
  border-radius: 50% 0 0 50%;
}
